# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
# git-cliff configuration file
# Docs: https://git-cliff.org/docs/configuration
# https://spl.hevs.io/spl-docs/tools/git/git-cliff.html#examples
# â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

[changelog]

# -----------------------------------------------
# HEADER
# Appears once at the top of the changelog
# -----------------------------------------------
header = """
# CHANGELOG\n
All notable changes to this project will be documented in this file.\n
"""

# -----------------------------------------------
# BODY
# Defines how each version section is formatted
# -----------------------------------------------
body = """

{% if version %}\
    ## {{ version }} - {{ timestamp | date(format="%Y-%m-%d") }}
{% else %}\
    ## Unreleased
{% endif %}\
{% if previous %}\
    {% if previous.commit_id and commit_id %}
        [{{ previous.commit_id | truncate(length=7, end="") }}]({{ previous.commit_id }})...\
        [{{ commit_id | truncate(length=7, end="") }}]({{ commit_id }})
    {% endif %}\
{% endif %}\
{% for group, commits in commits | group_by(attribute="group") %}
    ### {{ group | upper_first }}
    {% for commit in commits %}
        - {{ commit.message | split(pat="\n") | first | upper_first | trim }} ([{{ commit.id | truncate(length=7, end="") }}]({{ commit.id }}))\
        {% if commit.footers is defined and commit.footers %}\
          {% for footer in commit.footers %}\
            , {{ footer.token }}{{ footer.separator }}{{ footer.value }}\
          {% endfor %}\
        {% endif %}\
    {% endfor %}
{% endfor %}\n
"""

# -----------------------------------------------
# FOOTER
# Appended at the end of the changelog
# -----------------------------------------------
footer = """
---

> If it works, donâ€™t touch it... ğŸ¤£ It works on my computer... ğŸ’€
"""

# Remove extra blank lines / spaces from the template
trim = true

[git]

# Parse commit messages as Conventional Commits based on https://www.conventionalcommits.org
conventional_commits = true

# Ideally, if set to true, it filters out the commits that are not conventional (KEEPING THEM FOR NOW)
filter_unconventional = false

# Commit parsing and grouping rules for git-cliff
# These determine how commits are grouped into sections in CHANGELOG.md
commit_parsers = [
    # Feature commits â†’ MINOR version bump
    { message = "^feat", group = "âœ¨ Features" },

    # Fix commits â†’ PATCH version bump
    { message = "^fix", group = "ğŸ› Bug Fixes" },

    # Documentation updates
    { message = "^docs", group = "ğŸ“ Documentation" },

    # Performance improvements
    { message = "^perf", group = "âš¡ Performance" },

    # Refactors (no functional change)
    { message = "^refactor", group = "â™»ï¸ Refactor" },

    # Styling / formatting (no logic change)
    { message = "^style", group = "ğŸ¨ Styling" },

    # Tests (unit, integration, etc.)
    { message = "^test", group = "ğŸ§ª Testing" },

    # Generic chores (non-functional updates)
    { message = "^chore", group = "ğŸ§° Chores" },

    # Security-related commits
    { body = ".*security", group = "ğŸ”’ Security" },

    # Catch-all for any unclassified commits
    { message = ".*", group = "ğŸ§¹ Miscellaneous Tasks" },
]

# Ideally, if set to true, it filters out the commits that are not matched by commit parsers.
filter_commits = false

# Ideally, if set to true, it sorts the tags topologically
topo_order = false

# Sort the commits inside sections by the oldest â†’ the newest order.
sort_commits = "oldest"
